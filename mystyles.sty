% \begin{noindent}
\NeedsTeXFormat{LaTeX2e}

% Package name
\ProvidesPackage{mystyles}

% Required packages
\RequirePackage{amsmath,amssymb}
\RequirePackage[many]{tcolorbox}
\tcbuselibrary{breakable}

% Package options
\newif\ifprint@@sols
\print@@solsfalse
\DeclareOption{print-solutions}{\print@@solstrue}

% End package options
\ProcessOptions\relax

% Check if inside exercise environment
\newif\ifinside@@exercise
\inside@@exercisefalse
% New environment for handling exercises
\newcounter{exercisectr}
\newenvironment{exercise}[1]{%
  \inside@@exercisetrue%
  \refstepcounter{exercisectr}%
  \@ifclassloaded{beamer}{%
    \begin{block}{\#\theexercisectr\ #1}
  }{%
    \begin{tcolorbox}[%
      colback=yellow!3,%
      colframe=cyan!40!black,%
      breakable,%
      title={\#\theexercisectr\ #1},%
    ]%
  }%
}{%
  \@ifclassloaded{beamer}%
  {\end{block}}%
  {\end{tcolorbox}}%
  \inside@@exercisefalse%
}

\newcommand{\exsol}[1]{%
% Throw error if not inside exercise environment
\ifinside@@exercise
  % Add separator if true
  \ifprint@@sols%
    \tcblower%
    #1%
  \fi%
\else%
  \PackageError{mystyles}%
  {'solution' can only be used in the exercise environment}%
\fi%
}

% \end{noindent}
